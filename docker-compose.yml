services:
  jellyfin:
    image: lscr.io/linuxserver/jellyfin:latest
    container_name: jellyfin
    environment:
      - PUID=${JELLYFIN_UID}
      - PGID=${SHARED_GID}
      - TZ=${TZ}
    volumes:
      - ${CONFIG_BASE}/jellyfin:/config
      - ${DATA_BASE}:/data
    ports:
      - 8096:8096
      - 7359:7359/udp
      - 1900:1900/udp
    restart: unless-stopped
    networks:
      - main

  sonarr:
    image: lscr.io/linuxserver/sonarr:latest
    container_name: sonarr
    environment:
      - PUID=${SONARR_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
    volumes:
      - ${CONFIG_BASE}/sonarr:/config
      - ${DATA_BASE}:/data
    ports:
      - 8989:8989
    restart: unless-stopped
    networks:
      - main

  radarr:
    image: lscr.io/linuxserver/radarr:latest
    container_name: radarr
    environment:
      - PUID=${RADARR_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
    volumes:
      - ${CONFIG_BASE}/radarr:/config
      - ${DATA_BASE}:/data
    ports:
      - 7878:7878
    restart: unless-stopped
    networks:
      - main

  bazarr:
    image: lscr.io/linuxserver/bazarr:latest
    container_name: bazarr
    environment:
      - PUID=${BAZARR_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
    volumes:
      - ${CONFIG_BASE}/bazarr:/config
      - ${DATA_BASE}:/data
    ports:
      - 6767:6767
    restart: unless-stopped
    networks:
      - main

  prowlarr:
    image: lscr.io/linuxserver/prowlarr:latest
    container_name: prowlarr
    environment:
      - PUID=${PROWLARR_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
    volumes:
      - ${CONFIG_BASE}/prowlarr:/config
      - ${DATA_BASE}:/data
    ports:
      - 9696:9696
    restart: unless-stopped
    networks:
      - main

  jellyseerr:
    image: ghcr.io/fallenbagel/jellyseerr:latest
    container_name: jellyseerr
    environment:
      - PUID=${JELLYSEERR_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
    volumes:
      - ${CONFIG_BASE}/jellyseerr:/app/config
    ports:
      - 5055:5055
    restart: unless-stopped
    networks:
      - main

  jellystat-db:
    image: "postgres:15.2"
    shm_size: 1gb
    container_name: jellystat-db
    restart: unless-stopped
    environment:
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=mypassword
    volumes:
      - ${CONFIG_BASE}/postgres:/var/lib/postgresql/data
    ports:
      - 5432:5432
    networks:
      - main

  jellystat:
    image: "cyfershepard/jellystat:latest"
    container_name: jellystat
    restart: unless-stopped
    environment:
      - PUID=${JELLYSTAT_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=mypassword
      - POSTGRES_IP=jellystat-db
      - POSTGRES_PORT=5432
      - JWT_SECRET=my-secret-jwt-key
    volumes:
      - ${CONFIG_BASE}/jellystat:/app/backend/backup-data
    ports:
      - 3000:3000
    depends_on:
      - jellystat-db
    networks:
      - main

  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:latest
    container_name: qbittorrent
    environment:
      - PUID=${QBITTORRENT_UID}
      - PGID=${SHARED_GID}
      - UMASK=${UMASK}
      - TZ=${TZ}
      - WEBUI_PORT=8080
      - TORRENTING_PORT=6881
    volumes:
      - ${CONFIG_BASE}/qbittorrent:/config
      - ${DATA_BASE}/downloads:/downloads
    ports:
      - 8080:8080
      - 6881:6881
      - 6881:6881/udp
    restart: unless-stopped
    networks:
      - main

networks:
  main:
